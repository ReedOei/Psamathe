contract NFToken {
    type Token is nonfungible asset nat
    type TokenApproval is nonfungible consumable asset nat
    balances : linking address <=> set Token
    approval : linking address <=> set TokenApproval
    ownerToOperators : linking address <=> set address
    view canTransfer(_tokenId : nat) returns bool :=
        _tokenId in balances[msg.sender] or
        _tokenId in approval[msg.sender] or
        msg.sender in ownerToOperators[balances.ownerOf(_tokenId)]
    view validNFToken(_tokenId : nat) returns bool := balances.hasOwner(_tokenId)
    transaction transferFrom(_from : address, _to : address, _tokenId : nat):
        only when _to != 0x0 and canTransfer(_tokenId)
        if approval.hasOwner(_tokenId) {
            approval[approval.ownerOf(_tokenId)] --[ _tokenId ]-> consume
        }
        balances[_from] --[ _tokenId ]-> balances[_to]
}

