contract ERC20Bank {
    asset token := fungible nat
    source tokenSource of token provides 100000

    accounts stores token by address
    approval stores nat by (address, address)

    on create():
        flow everything from tokenSource to account[sender]

    view totalSupply() of nat: total token
    view balanceOf(addr : address) of nat: account[addr]
    view allowance(src : address, dst : address) of nat: approval[src, dst]

    transaction transfer(dst : address, amount : nat):
        flow amount from account[sender] to account[dst]

    transaction approve(dst : address, amount : nat):
        approval[msg.sender, dst] := amount

    transaction transferFrom(src : address, dst : address, amount : nat):
        flow amount from approval[src, dst] to uint256s
        flow amount from account[src] to account[dst]
}

